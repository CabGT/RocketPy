language: python
python:
  - "3.8"
install:
  - make install
  - pip install -r requirements_test.txt

before_script:
  - make verify-lint
script:
  - make test

deploy:
  provider: pypi
  username: "__token__"
  password: $PYPI_SECRET
  twine_version: 1.12.1
  on:
    all_branches: true
    python: 3.8
