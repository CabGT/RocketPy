language: python
python:
  - "3.8"
install:
  - make install
  - pip install -r requirements_test.txt

before_script:
  - make verify-lint
script:
  - make test

deploy:
  provider: pypi
  username: "__token__"
  password: "pypi-AgEIcHlwaS5vcmcCJDk2MWU2ODJkLTE3YjQtNDU2OS04NTcwLTJkNmRmNjFiY2I3MAACOnsicGVybWlzc2lvbnMiOiB7InByb2plY3RzIjogWyJyb2NrZXQtcHkiXX0sICJ2ZXJzaW9uIjogMX0AAAYg1mMHJdM66szDPlOqmM6yXfCainsXpfWv4tvadcgm8WM"
  on:
    all_branches: true
    python: 3.8
